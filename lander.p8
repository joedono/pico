pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
-- lander
-- little hive

function _init()
 game_over = false;
 win = false;
 g = 0.025;
 s = rndb(1,200);
 make_player();
 make_ground();
end

function _update()
	if not game_over then
  move_player();
  check_land();
 elseif btnp(5) then
  _init();
 end
end

function check_land()
 l_x = flr(p.x);
 r_x = flr(p.x+7);
 b_y = flr(p.y+1);
 
 over_pad=l_x>=pad.x and r_x<=pad.x+pad.width;
 on_pad=b_y>=pad.y-1;
 slow=p.dy<1;
 
 if over_pad and on_pad and slow then
  p.y=pad.y-8;
  end_game(true);
 elseif over_pad and on_pad then
  end_game(false);
 else
  for i=l_x,r_x do
   if (gnd[i]<b_y) end_game(false);
  end
 end
end

function end_game(won)
 game_over=true;
 win=won;
 
 if win then
  sfx(0);
 else
  sfx(1);
 end
end

function _draw()
 cls();
 draw_stars();
 draw_ground();
 draw_player();
 
 if game_over then
  if win then
   print("you win!",48,48,11);
  else
   print("too bad!",48,48,8);
  end
  
  print("press âŽ to play again",20,70,5);
 end
end
-->8
-- player

function make_player()
 p = {
  x = 60,
  y = 8,
  dx = 0,
  dy = 0,
  sprite = 1,
  alive = true,
  thrust = 0.075
 };
end

function move_player()
 p.dy += g;
 
 thrust();
 
 p.x += p.dx;
 p.y += p.dy;
 
 stay_on_screen();
end

function thrust()
 if (btn(0)) p.dx-=p.thrust;
 if (btn(1)) p.dx+=p.thrust;
 if (btn(2)) p.dy-=p.thrust;
 
 if (btn(0) or btn(1) or btn(2)) sfx(2);
end

function stay_on_screen()
 if p.x < 0 then
  p.x = 0;
  p.dx = -p.dx / 2;
 end
 
 if p.x > 119 then
  p.x = 119;
  p.dx = -p.dx / 2;
 end
 
 if p.y < 0 then
  p.y = 0;
  p.dy = 0;
 end
end


function draw_player()
 spr(p.sprite, p.x, p.y);
 
 if game_over then
  if win then
   spr(4,p.x,p.y-8);
  else
   spr(5,p.x,p.y);
  end
 end
end
-->8
-- background
function rndb(low,high)
 return flr(rnd(high-low+1)+low);
end

function draw_stars()
 srand(s);
 
 for i=1,50 do
  pset(rndb(0,127),rndb(0,127),rndb(5,7))
 end
 
 srand(time())
end
-->8
-- ground
function make_ground()
 gnd = {};
 local top = 96;
 local btm = 120;
 
 pad = {
  width = 15,
  x = rndb(0, 126-15),
  y = rndb(top, btm),
  sprite = 2
 };
 
 -- ground at pad
 for i=pad.x,pad.x+pad.width do
  gnd[i]=pad.y;
 end
 
 -- ground right of pad
 for i=pad.x+pad.width+1,127 do
  local h=rndb(gnd[i-1]-3,gnd[i-1]+3);
  gnd[i]=mid(top,h,btm);
 end
 
 -- ground left of pad
 for i=pad.x-1,0,-1 do
  local h=rndb(gnd[i+1]-3,gnd[i+1]+3);
  gnd[i]=mid(top,h,btm);
 end
end

function draw_ground()
 for i=0,127 do
  line(i,gnd[i],i,127,5);
 end
 
 spr(pad.sprite,pad.x,pad.y,2,1);
end
__gfx__
0000000000666600761dddddddddd766000000000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066c76607666666666666666000000000899998000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070066ccc766006666666666660000000000899aa99800000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700066cccc660000000000000000000b700089aaaa9800000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700066555566000000000000000000bb700089aaaa9800000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000666666000000000000000000bbb7000899aa99800000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000050550500000000000000000000070000899998000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000660660660000000000000000000070000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000
00000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00500000000000000000000000000000000050005000000000000000000000000000000000000000000000000000000000000000000000000000000000000070
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000500000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000
00000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000600000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000
00000000000000000000000000000000000000000000000000000000000000000000000000000000070000000000000000005000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060
00000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b70000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000070000000000000000000000bb70000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bbb70000000000000000000
00000000000000000000000000000000000000070000000000000000000000000000000000000000000000000000000000000000000070000000000000000000
00000000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000000000070000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006666000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000066c76600000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000066ccc7660000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000066cccc660000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000500000050000005000000000665555660000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000007000000500000050000005000000000066666600000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000500000550505555500500000050550500000000000000005
00000000000000000000000000000000000000000000000000000000000000000000000000050505555000555505555550500000660660660000000000000005
000000000000000000000000000000000000000000500000050000000000000000000000000505555555005555555555505761dddddddddd7660000000500055
00000000000000000000000000000000000000000055000005500000000000000000000000055555555505555555555555576666666666666665000005550555
00000000000000000000000000000000000000000555005055550000000000500000000000555555555505555555555555555666666666666555000005550555
00006050000000000000000000000000000000000555505555550050000005550000000000555555555555555555555555555555555555555555000005550555
00000050000000000000700000000000000000005555555555550050500005550050000055555555555555555555555555555555555555555555505055555555
00000555505000000000000000000600000000005555555555555555500005550500050555555555555555555555555555555555555555555555505055555555
00005555555500000000000050000000000000505555555555555555550055555500550555555555555555555555555555555555555555555555505055555555
00005555555500000000000055000000000000555555555555555555555055555500555555555555555555555555555555555555555555555555555555555555
00005555555500000000000055050500000000555555555555555555555555555550555555555555555555555555555555555555555555555555555555555555
00055555555550000000005555550500000005555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
05555555555555000000005555555505000005555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555500000055555555555050055555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555500005555555555555050055555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555500055555555555555550555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555550555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555

__sfx__
000c00001b0701b02016070160200f0700f0201b0701b02000000160701a0701a020000001b0701b0201b00000000000000000000000000000000000000000000000000000000000000000000000000000000000
00040000326702b670236601f6501a6401663013630106200c620096200761006610036100260013600116001160010600106000f6000f6000000000000000000000000000000000000000000000000000000000
001000002363000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
